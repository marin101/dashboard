{
    name: "Linear Mixed Effects",
    description: "Can be used for marketing mix model and similar applications",

    # Order of steps must correspond with the order of parameter lists
    steps: [
        {
            id: read,
            name: "Data Read",
            description: "Read your data file and look at basic diagnostics"
        },
        {
            id: "prep",
            name: "Data Preparation",
            description: "Prepare your modeling data and apply variable transformations"
        },
        {
            id: "model",
            name: "Run Model",
            description: "Run linear mixed effects models and report ROI from the best model"
        },
        {
            id: "optim",
            name: "Optimization",
            description: "Top-down channel optimization for different scenarios"
        }
    ],

    parameters: [
    [
        # Read step parameters
        {
            id: "file1",
            type: "file",
            name: "Input data",
            description: "Upload input data in CSV format",
          },
          {
             id: "depvar",
             type: "dragDrop",
             name: "Target variable",
             description: "What you want to model",

             size: 1
          },
          {
             "id": "subject",
             "type": "dragDrop",
             "name": "Subject",
             "description": "Level at which random effects will be reported",

             size: 1
          },
          {
             "id": "period",
             "type": "dragDrop",
             "name": "Period",
             "description": "Column which represents time period",

             size: 1
          },
          {
             "id": "geobrand",
             "type": "dragDrop",
             "name": "Geo-Brand",
             "description": "name of a column that represents a Brand or Geography",

             size: 1
          },
          {
             "id": "pbounds",
             "type": "range",
             "name": "Model start period",
             "description": "Periods prior to this will not be included in the model",

             source: "period"
          },
          {
             "id": "drop_period",
             "type": "dropdown",
             "name": "Drop Period which we don't want to Model",
             "description": "Select Periods to drop_period",

             source: "period",
          },
          {
             id: "lst_cost",
             type: "dropdownEdit",
             name: "Enter per unit channel costs",
             description: "Required for calculating ROI",

             defaultValue: 1
          },

          {
             "id": "datefmt",
             "type": "radio",           # Mutually exclusive checkboxes
             "name": "Date format",
             "description": "Format in which dates are stored in the input file",

             "defaultValue": 0,         # Index in the choice array

             "choice": ["YYYY-MM-DD", "DD-MM-YYYY", "MM-DD-YYYY"],
             "returnValue": ["%Y-%m-%d", "%d-%m-%Y", "%m-%d-%Y"],
          },
          {
             "id": "lst_dim",
             "type": "dragDrop",
             "name": "Descriptor columns",
             "description": "These will NOT be used for modeling",

             "defaultValue": [''],

             # When size is not given for a dragDrop, size is arbitrary
          },
          {
             id: "impute",
             type: "checkbox",
             name: "Impute missing values?",
             description: "Missing values will be replaced with zero",

             defaultValue: true,            # true = checked, false == unchecked
             returnValue: ['0', '1'],       # [unchecked_retval, checked_ret_val]
          },
          {
             "id": "outlier",
             "type": "checkbox",
             "name": "Treat outliers?",
             "description": "Outliers will be replaced with median",

             "defaultValue": false,
             "returnValue": ['0', '1'],
          },
          {
             "id": "static",
             "type": "slider",
             "name": "Set the static",
             "description": "Subjects will be dropped if they have data for less than static % of periods",

             "defaultValue": 0,

            unit: '%',

             min: 0,
             max: 100,
             step: 10,

             scale: 100  # Displayed value is divided by scale when sent to the console
          }
        ],

        # Preparation step parameters
        [
          {
             id: "use_decay",
             type: "checkbox",
             name: "Apply adstock decay?",
             description: "Apply adstock decay?",

             defaultValue: true,
             returnValue: ['0', '1'],
          },
          {
             "id": "decay_bounds",
             "type": "range",
             "name": "Minimum decay rate",
             "description": "All decay rates starting from this value will be modeled",

             "defaultValue": [50, 80],

            control: "use_decay",  # Specifies the checkbox parameter
                                   # which enables/disables this parameter

             min: 0,
             max: 100,
             step: 1,

             scale: 100
          },
          {
             "id": "use_log",
             "type": "radio",
             "name": "Apply log transformation?",
             "description": "Can be applied to target variables only or both target variables and factors",

             "defaultValue": 0,

             "choice": ["None","Semi-log","Log-log"],
             "returnValue": [0, 1, 2],
          },
          {
             "id": "use_mc",
             "type": "checkbox",
             "name": "Apply mean centering?",
             "description": "Apply mean centering?",

             "defaultValue": true,
             "returnValue": ['0', '1'],
          }
       ],

        # Model step parameters
        [
         {
             "id": "use_geobrand",
             "type": "dropdown",
             "name": "Geo-Brand Model",
             "description": "Brands/Geographies to analyze (leave blank to include ALL)",

             source: "geobrand",
          },
          {
             "id": "use_seas",
             "type": "radio",
             "name": "Model seasonality?",
             "description": "Options for modeling seasonality",

             "defaultValue": 0,

             "choice": ["None","Dummy Month Factors","Numeric Sales Factors"],
             "returnValue": [0, 1, 2],
          },
          {
             "id": "lst_seas",
             "type": "dragDrop",
             "name": "Select periods to control for",
             "description": "Dummy seasonality factors will be used (leave blank to let model decide the periods)",

             "defaultValue": '',
             source: "period",
          },
          {
             "id": "lst_rand",
             "type": "dragDrop",
             "name": "Variables to randomize",
             "description": "Impacts for these variables will be reported at a subject level (leave blank to randomize all)",

             "defaultValue": '',
          },
          {
             "id": "covstr",
             "type": "radio",
             "name": "Select covariance structure",
             "description": "Options to model random effect interactions",

             "defaultValue": 0,
             "choice": ["Uncorrelated random slopes","Correlated random slopes","Try both options"],
             "returnValue": ["0","1","2"],
          },
          {
             "id": "use_stat",
             "type": "radio",
             "name": "Select fit statistic to use",
             "description": "Best model will be selected based on this statistic. These measures should be interpreted in a relative sense only.",

             "defaultValue": 0,

             "choice": ["Use R-squared","Use AIC (Akaike Information Criterion)"],
             "returnValue": [1, 2],
          },
          {
             "id": "use_prior",
             "type": "radio",
             "name": "Select prior values to use",
             "description": "Interpret priors as % contribution or ROI?",

             "defaultValue": 0,

             "choice": ["Use prior channel contribution","Use prior channel ROI"],
             "returnValue": ["1","2"],
          },
          {
             "id": "lst_prior",
             "type": "dropdownEdit",
             "name": "List of prior values",
             "description": "List of prior values",

             "defaultValue": ''
          },
          {
             "id": "mixnmatch",
             "type": "radio",
             "name": "Report channel impacts from different models?",
             "description": "Uncheck to ensure all impacts reported from a single model",

             "defaultValue": 1,

             "choice": ["false", "true"],
             "returnValue": [0, 1],
          },
          {
             "id": "drop_period",
             "type": "dropdown",
             "name": "Drop Period which we don't want to Model",
             "description": "Select Periods to drop_period",

             source: "period",
          },
          {
             "id": "drop_subject",
             "type": "dropdown",
             "name": "Drop Subject which we don't want to Model",
             "description": "Select Subject to Model",

             source: "subject",
          },
          {
             id: "lst_cost",
             type: "dropdownEdit",
             name: "Enter per unit channel costs",
             description: "Required for calculating ROI",

             defaultValue: 1
          },
          {
             "id": "margin",
             "type": "text",
             "name": "Enter gross margin",
             "description": "Required for calculating ROI",

             "defaultValue": 1
          }
       ],

        # Optimize step parameters
           [
          {
             "id": "optim_goal",
             "type": "radio",
             "name": "Select optimization goal",
             "description": "Defines what to optimize",

             "defaultValue": 0,

             "choice": ["Sales Max with Budget Constraint","Cost Min with Sales Target Constraint"],
             "returnValue": [1, 2],
          },
          {
             "id": "budget_factor",
             "type": "slider",
             "name": "Total channel cost as a ratio of current",
             "description": "Expands the Budget Constraint to go beyond current budget",

             "defaultValue": 1,

            unit: '%',

             min: -50,
             max: 50,
             step: 10,

             scale: 100
          },
          {
             "id": "sales_factor",
             "type": "slider",
             "name": "Target sales as a ratio of current",
             "description": "Expands the Sales Target Constraint to go beyond current sales",

             "defaultValue": 1,

            unit: '%',

             min: -50,
             max: 50,
             step: 10,

             scale: 100
          }
        ]
    ]
}

